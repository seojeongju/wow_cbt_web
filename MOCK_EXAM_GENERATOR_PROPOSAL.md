# 모의고사 출제 기능 구현 제안서

## 📋 개요
관리자가 문제은행에서 문제를 선택하여 모의고사를 자동으로 생성하는 기능입니다.

## 🎯 주요 기능

### 1. 문제 선택 및 필터링
- **과정 선택**: 특정 과정의 문제만 필터링
- **과목 선택**: 과목별로 문제 필터링
- **주제/카테고리 필터**: 세부 주제나 카테고리로 필터링
- **검색 기능**: 문제 내용으로 검색
- **문제 미리보기**: 선택한 문제 내용 확인
- **체크박스 선택**: 개별 문제 선택/해제
- **전체 선택/해제**: 한 번에 모든 문제 선택

### 2. 출제 옵션 설정

#### 2.1 수동 출제
- 관리자가 직접 문제를 선택하여 출제
- 선택한 문제 목록 표시
- 문제 순서 변경 가능 (드래그 앤 드롭)

#### 2.2 자동 출제 (랜덤)
- **문제 수 설정**: 출제할 문제 개수 지정
- **랜덤 출제**: 필터링된 문제 중 랜덤 선택
- **주제별 균등 분배**: 각 주제/카테고리에서 균등하게 선택
- **난이도별 출제** (향후): 난이도별 비율 설정

#### 2.3 출제 조건
- **최소 문제 수**: 각 카테고리별 최소 문제 수 설정
- **최대 문제 수**: 각 카테고리별 최대 문제 수 설정
- **중복 방지**: 같은 문제가 여러 번 출제되지 않도록

### 3. 시험 설정
- **시험 제목**: 모의고사 제목 입력
- **시간 제한**: 분 단위로 설정 (기본값: 60분)
- **합격 점수**: 백분율 또는 점수로 설정 (기본값: 60점)
- **설명**: 시험에 대한 설명 입력
- **과정 연결**: 어떤 과정에 속할지 선택
- **과목 연결**: 어떤 과목에 속할지 선택

### 4. 미리보기 및 저장
- **문제 목록 미리보기**: 출제될 문제 목록 확인
- **통계 정보**: 
  - 총 문제 수
  - 카테고리별 문제 수
  - 예상 소요 시간
- **저장**: 모의고사 생성 및 저장
- **즉시 출제**: 저장 후 바로 시험 페이지로 이동

## 🎨 UI/UX 설계

### 페이지 구조
```
[관리자 대시보드]
  └─ [모의고사 출제] 메뉴 추가
      ├─ 1단계: 문제 선택
      │   ├─ 필터 섹션 (과정, 과목, 주제, 검색)
      │   ├─ 문제 목록 (체크박스, 미리보기)
      │   └─ 선택된 문제 수 표시
      │
      ├─ 2단계: 출제 옵션
      │   ├─ 수동/자동 선택
      │   ├─ 자동 출제 옵션 (문제 수, 분배 방식)
      │   └─ 선택된 문제 목록 (순서 변경 가능)
      │
      ├─ 3단계: 시험 설정
      │   ├─ 기본 정보 (제목, 시간, 합격점수)
      │   ├─ 과정/과목 연결
      │   └─ 설명 입력
      │
      └─ 4단계: 미리보기 및 저장
          ├─ 문제 목록 미리보기
          ├─ 통계 정보
          └─ 저장 버튼
```

### 주요 컴포넌트
1. **문제 선택 컴포넌트**
   - 필터 바
   - 문제 리스트 (체크박스)
   - 문제 미리보기 모달

2. **출제 옵션 컴포넌트**
   - 수동/자동 토글
   - 자동 출제 설정 폼
   - 선택된 문제 목록 (드래그 앤 드롭)

3. **시험 설정 컴포넌트**
   - 기본 정보 입력 폼
   - 과정/과목 선택 드롭다운

4. **미리보기 컴포넌트**
   - 문제 목록 카드
   - 통계 대시보드

## 🔧 기술 구현

### API 엔드포인트

#### 1. 문제 조회 (필터링)
```
GET /api/questions?courseId={id}&subjectId={id}&category={name}&search={keyword}
```

#### 2. 모의고사 생성
```
POST /api/exams/generate
Body: {
  title: string,
  courseId: string,
  subjectId?: string,
  timeLimit: number,
  passScore: number,
  description?: string,
  questionIds: string[],  // 선택된 문제 ID 배열
  mode: 'manual' | 'random',  // 수동 또는 자동
  randomOptions?: {  // 자동 출제 옵션
    totalQuestions: number,
    distributionType: 'equal' | 'random',  // 균등 분배 또는 완전 랜덤
    categoryDistribution?: { [category: string]: number }  // 카테고리별 문제 수
  }
}
```

### 데이터베이스 스키마
기존 `exams` 테이블 사용 (추가 필드 불필요)

### 서비스 함수
```typescript
// examService.ts에 추가
generateMockExam: async (options: {
  title: string;
  courseId: string;
  subjectId?: string;
  timeLimit: number;
  passScore: number;
  questionIds?: string[];  // 수동 선택
  randomOptions?: {
    totalQuestions: number;
    filters: {
      courseId?: string;
      subjectId?: string;
      categories?: string[];
    };
    distributionType: 'equal' | 'random';
  };
}): Promise<{ success: boolean; examId?: string; message?: string }>
```

## 📝 구현 단계

### Phase 1: 기본 기능 (1주)
1. 문제 선택 UI 구현
2. 필터링 기능 구현
3. 체크박스 선택 기능
4. 선택된 문제 목록 표시

### Phase 2: 출제 옵션 (1주)
1. 수동 출제 기능
2. 자동 출제 (랜덤) 기능
3. 문제 순서 변경 기능

### Phase 3: 시험 생성 (3일)
1. 시험 설정 폼
2. API 연동
3. 저장 기능

### Phase 4: 미리보기 및 개선 (2일)
1. 미리보기 기능
2. 통계 정보 표시
3. UI/UX 개선

## 🎯 추가 고려사항

### 향후 확장 기능
1. **템플릿 저장**: 자주 사용하는 출제 옵션을 템플릿으로 저장
2. **난이도 설정**: 문제에 난이도 태그 추가 후 난이도별 출제
3. **출제 이력**: 생성된 모의고사 이력 관리
4. **일괄 생성**: 여러 모의고사를 한 번에 생성
5. **문제 품질 분석**: 선택된 문제들의 통계 분석

### 성능 최적화
- 대량 문제 조회 시 페이지네이션
- 필터링 결과 캐싱
- 문제 미리보기 지연 로딩

### 사용자 경험
- 단계별 진행 표시 (Step 1/4)
- 이전 단계로 돌아가기
- 임시 저장 기능
- 키보드 단축키 지원

## 📊 예상 효과
1. **시간 절약**: 수동으로 문제를 하나씩 추가하는 시간 단축
2. **편의성 향상**: 랜덤 출제로 다양한 모의고사 생성 가능
3. **일관성**: 주제별 균등 분배로 균형잡힌 시험 출제
4. **확장성**: 향후 AI 기반 출제 옵션 추가 가능


